<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="{{ url_for('static', path='assets/imgs/theme/FSH-Browser-Logo.jpeg') }}">
    <title>{% block title %}{% endblock %} - Web</title>
    <link rel="stylesheet" href="{{ url_for('static', path='lib/bootstrap/dist/css/bootstrap.min.css') }}" /> 
    <link rel="stylesheet" href="{{ url_for('static', path='assets/css/main.css') }}?v=5.6" />
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', path='assets/css/plugins/animate.min.css') }}" />
    <link rel="stylesheet" href="{{ url_for('static', path='assets/css/main.css') }}?v=1.1" />
    
    <!-- Custom Site CSS -->
    <link rel="stylesheet" href="{{ url_for('static', path='assets/css/site.css') }}" />

    <!-- Font Awesome kit -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
        integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- Boostrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.min.css">   

    <!-- Toastr -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">

    

</head>

<body >
    <!-- Start header -->
    <header class="header-area header-style-1 header-height-2">
        <div class="mobile-promotion">
            <span>Share More, Waste Less</span>
        </div>
        <div class="header-middle header-middle-ptb-1 d-none d-lg-block">
            <div class="container">
                <div class="header-wrap">
                    <div class="logo logo-width-1">
                        <!-- logo-width-1 -->
                        <a href="#" class=""><img style="border:100px;" src="{{ url_for('static', path='assets/imgs/theme/FSH4-Logo.png') }}" alt="logo" /></a>
                    </div>
                    <div class="header-right">
                        <div class="search-style-2">
                            <form action="#">
                                <select class="select-active">
                                    <option>All Categories</option>
                                    <option>Milks and Dairies</option>
                                    <option>Wines & Alcohol</option>
                                    <option>Pet Foods & Toy</option>
                                    <option>Baking material</option>
                                    <option>Vegetables</option>
                                    <option>Fresh Seafood</option>
                                    <option>Noodles & Rice</option>
                                    <option>Others</option>
                                </select>
                                <input type="text" placeholder="Search for items..." />
                            </form>
                        </div>
                        <div class="header-action-right">
                            <div class="header-action-2">
                                <div class="search-location">
                                    <form action="#">
                                        <select class="select-active">
                                            <option>Your Location</option>
                                            <option>Singapore</option>
                                        </select>
                                    </form>
                                </div>
                                <div class="header-action-icon-2">
                                    <a href="#">
                                        <img class="svgInject" alt="Nest" src="{{ url_for('static', path='assets/imgs/theme/icons/icon-notification.svg') }}" />
                                        <span class="pro-count blue" id="notificationCount">3</span>
                                    </a>
                                    <a href="#"><span class="lable ml-0">Notifications</span></a>

                                </div>
                                <div class="header-action-icon-2">
                                    <a href="#">
                                        <img class="svgInject" alt="Nest" src="{{ url_for('static', path='assets/imgs/theme/icons/icon-user.svg') }}" />
                                    </a>
                                    {% if request.session["session"] %}
                                        {% if request.session["session"]["role"] %}
                                            <a href="#"><span class="lable ml-0">{{request.session["session"]["username"]}} / {{request.session["session"]["role"]}}</span></a>
                                            <p id="login_user" style="display: none;">{{request.session["session"]["username"]}}</p>
                                        {% endif %}
                                        <div class="cart-dropdown-wrap cart-dropdown-hm2 account-dropdown">
                                            <ul>
                                                <li><a href="#"><i class="fi fi-rs-user mr-10"></i>My Account</a></li>
                                                <li><a href="#"><i class="fi fi-rs-bell mr-10"></i>Notification</a></li>
                                                <li><a href="#"><i class="fi fi-rs-settings-sliders mr-10"></i>Setting</a></li>
                                                {% if request.session["session"] %}
                                                    <li>
                                                        <form method="POST" action="/authentication/logout" onsubmit="logout()">
                                                            <button class="btn btn-primary" type="submit">
                                                                <i class="fi fi-rs-sign-out mr-10"></i>Sign out
                                                            </button>
                                                        </form>
                                                    </li>
                                                {% endif %}
                                            </ul>
                                        </div>
                                    {% else %}
                                        <a href="/authentication">
                                            <span class="lable ml-0">Login</span>
                                        </a>
                                    {% endif %}
                                    
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="header-bottom header-bottom-bg-color sticky-bar">
            <div class="container">
                <div class="header-wrap header-space-between position-relative">
                    <div class="logo logo-width-1 d-block d-lg-none">
                        <a href="#"><img src="{{ url_for('static', path='assets/imgs/theme/FSH4-Logo.png') }}" alt="logo" /></a>
                    </div>
                    {% if request.session["session"] %}
                    <div class="header-nav d-none d-lg-flex">
                        
                        <div class="main-categori-wrap d-none d-lg-block">
                            <a class="categories-button-active" href="#">
                                <span class="fi-rs-apps"></span> <span class="et">Browse</span> All Categories
                                <i class="fi-rs-angle-down"></i>
                            </a>
                            <div class="categories-dropdown-wrap categories-dropdown-active-large font-heading">
                                <div class="d-flex categori-dropdown-inner">
                                    <ul>
                                        <li>
                                            <a href="#"><img src="{{ url_for('static', path='assets/imgs/theme/icons/category-1.svg') }}" alt="" />Milks & Dairies</a>
                                        </li>
                                        <li>
                                            <a href="#"><img src="{{ url_for('static', path='assets/imgs/theme/icons/category-8.svg') }}" alt="" />Vegetables</a>
                                        </li>
                                        <li>
                                            <a href="#"><img src="{{ url_for('static', path='assets/imgs/theme/icons/category-1.svg') }}" alt="" />Baking Material</a>
                                        </li>
                                        <li>
                                            <a href="#"><img src="{{ url_for('static', path='assets/imgs/theme/icons/category-9.svg') }}" alt="" />Noodles & Rice</a>
                                        </li>
                                        <li>
                                            <a href="#"><img src="{{ url_for('static', path='assets/imgs/theme/icons/icon-4.svg') }}" alt="" />Others</a>
                                        </li>  
                                    </ul>
                                    <ul class="end">
                                        <li>
                                            <a href="#"><img src="{{ url_for('static', path='assets/imgs/theme/icons/category-7.svg') }}" alt="" />Fresh Fruits</a>
                                        </li>
                                        <li>
                                            <a href="#"><img src="{{ url_for('static', path='assets/imgs/theme/icons/category-2.svg') }}" alt="" />Wine & Drinks</a>
                                        </li>
                                        <li>
                                            <a href="#"><img src="{{ url_for('static', path='assets/imgs/theme/icons/category-4.svg') }}" alt="" />Pet Foods</a>
                                        </li>
                                        <li>
                                            <a href="#"><img src="{{ url_for('static', path='assets/imgs/theme/icons/category-5.svg') }}" alt="" />Snacks</a>
                                        </li>                                 
                                    </ul>
                                </div>
                            </div>
                        </div>
                        
                        <div class="main-menu main-menu-padding-1 main-menu-lh-2 d-none d-lg-block font-heading">
                            <nav>
                                <ul>
                                    <li class="hot-deals">
                                        <img src="{{ url_for('static', path='assets/imgs/theme/icons/icon-hot.svg') }}" alt="hot deals" />
                                        <a href="/">Home</a>
                                    </li>
                                    <li>
                                        <a href="#">Food Share<i class="fi-rs-angle-down"></i></a>
                                        <ul class="sub-menu">
                                            <li><a href="{{ url_for('show_my_listings_page') }}">My Listings</a></li>
                                            <li><a href="{{ url_for('show_add_listing_form') }}">Add FoodItems</a></li>
                                            <!-- <li>
                                                <a href="#">Single Post <i class="fi-rs-angle-right"></i></a>
                                                <ul class="level-menu level-menu-modify">
                                                    <li><a href="blog-post-left.html">Left Sidebar</a></li>
                                                    <li><a href="blog-post-right.html">Right Sidebar</a></li>
                                                    <li><a href="blog-post-fullwidth.html">No Sidebar</a></li>
                                                </ul>
                                            </li> -->
                                        </ul>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                    {% endif %}
                    <div class="header-action-icon-2 d-block d-lg-none">
                        <div class="burger-icon burger-icon-white">
                            <span class="burger-icon-top"></span>
                            <span class="burger-icon-mid"></span>
                            <span class="burger-icon-bottom"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    
    <div class="mobile-header-active mobile-header-wrapper-style" >
        <div class="mobile-header-wrapper-inner">
            <div class="mobile-header-top">
                <div class="mobile-header-logo">
                    <a href="#"><img src="{{ url_for('static', path='assets/imgs/theme/FSH4-Logo.png') }}" alt="logo" /></a>
                </div>
                <div class="mobile-menu-close close-style-wrap close-style-position-inherit">
                    <button class="close-style search-close">
                        <i class="icon-top"></i>
                        <i class="icon-bottom"></i>
                    </button>
                </div>
            </div>
            <div class="mobile-header-content-area">
                <div class="mobile-search search-style-3 mobile-header-border">
                    <form action="#">
                        <input type="text" placeholder="Search for items…" />
                        <button type="submit"><i class="fi-rs-search"></i></button>
                    </form>
                </div>
                <div class="mobile-menu-wrap mobile-header-border">
                    <!-- mobile menu start -->
                    <nav>
                        <ul class="mobile-menu font-heading">
                            <li class="menu-item-has-children">
                                <a href="/">Home</a>
                            </li>
                            <li class="menu-item-has-children">
                                <a href="#">Food Share</a>
                                <ul class="dropdown">
                                    <li><a href="{{ url_for('show_my_listings_page') }}">My Listings</a></li>
                                    <li><a href="{{ url_for('show_add_listing_form') }}">Add FoodItems</a></li>
                                </ul>
                            </li>
                        </ul>
                    </nav>
                    <!-- mobile menu end -->
                </div>
                <div class="mobile-header-info-wrap">
                    <div class="single-mobile-header-info">
                        <a href="#"><i class="fi-rs-marker"></i> 180 Ang Mo Kio Ave 8, Singapore 569830 </a>
                    </div>
                    <div class="single-mobile-header-info">
                        <a href="#"><i class="fi-rs-user"></i>Log In / Sign Up </a>
                    </div>
                    <div class="single-mobile-header-info">
                        <a href="#"><i class="fi-rs-headphones"></i>(+65) - 8183 - 8227 </a>
                    </div>
                </div>
                <div class="mobile-social-icon mb-50">
                    <h6 class="mb-15">Follow Us</h6>
                    <a href="#"><img src="{{ url_for('static', path='assets/imgs/theme/icons/icon-facebook-white.svg') }}" alt="" /></a>
                    <a href="#"><img src="{{ url_for('static', path='assets/imgs/theme/icons/icon-twitter-white.svg') }}" alt="" /></a>
                    <a href="#"><img src="{{ url_for('static', path='assets/imgs/theme/icons/icon-instagram-white.svg') }}" alt="" /></a>
                    <a href="#"><img src="{{ url_for('static', path='assets/imgs/theme/icons/icon-pinterest-white.svg') }}" alt="" /></a>
                    <a href="#"><img src="{{ url_for('static', path='assets/imgs/theme/icons/icon-youtube-white.svg') }}" alt="" /></a>
                </div>
                <div class="site-copyright">Copyright 2023 © FoodShareHub. All rights reserved. </div>
            </div>
        </div>
    </div>
    <!--End header-->

    <div class="container">
        {% for message in get_flashed_messages() %}
            {% if message.category and message.category.strip() %}
                <div class="alert alert-{{ message.category }} alert-dismissible fade show" role="alert">
                    <strong>{{ message.message }}</strong>
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {% endif %}
        {% endfor %}
        <!-- Alert Modal -->
        <div id="alertModal" class="modal fade" >
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="alertModalLabel"></h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body" id="alertModalBody">
                        <!-- Message content will be inserted here -->
                    </div>
                </div>
            </div>
        </div>
    </div> 
    <div>
        {% block content %}
        {% endblock %}
    </div> 
    <hr>

    <footer class="main">
        <section class="section-padding footer-mid">
            <div class="container pt-15 pb-20">
                <div class="row">
                    <div class="col">
                        <div class="widget-about font-md mb-md-3 mb-lg-3 mb-xl-0">
                            <div class="logo mb-30">
                                <a href="#" class="mb-15"><img src="{{ url_for('static', path='assets/imgs/theme/FSH4-Logo.png') }}" alt="logo" /></a>
                                <p class="font-lg text-heading">Share More, Waste Less</p>
                            </div>
                            <ul class="contact-infor">
                                <li><img src="{{ url_for('static', path='assets/imgs/theme/icons/icon-location.svg') }}" alt="" /><strong>Address:</strong> <span>180 Ang Mo Kio Ave 8, Singapore 569830</span></li>
                                <li><img src="{{ url_for('static', path='assets/imgs/theme/icons/icon-contact.svg') }}" alt="" /><strong>Call Us:</strong> <span>(+65) - 8183-8227</span></li>
                                <li><img src="{{ url_for('static', path='assets/imgs/theme/icons/icon-email-2.svg') }}" alt="" /><strong>Email:</strong> <span>support@FoodShareHub.com</span></li>
                            </ul>
                        </div>
                    </div>
                    <div class="footer-link-widget col">
                        <h4 class="widget-title">Company</h4>
                        <ul class="footer-list mb-sm-5 mb-md-0">
                            <li><a href="#">About Us</a></li>
                            <li><a href="#">Privacy Policy</a></li>
                            <li><a href="#">Terms &amp; Conditions</a></li>
                            <li><a href="#">Contact Us</a></li>
                        </ul>
                    </div>
                    <div class="footer-link-widget col">
                        <h4 class="widget-title">Account</h4>
                        <ul class="footer-list mb-sm-5 mb-md-0">
                            <li><a href="#">Sign In</a></li>
                            <li><a href="#">Sign Up</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>
        <div class="container pb-30">
            <div class="row align-items-center">
                <div class="col-12 mb-30">
                    <div class="footer-bottom"></div>
                </div>
                <div class="col-xl-4 col-lg-6 col-md-6">
                    <p class="font-sm mb-0">&copy; 2023, <strong class="text-brand">FoodShareHub</strong> - A Food Sharing Platform <br />All rights reserved</p>
                </div>
                <div class="col-xl-4 col-lg-6 text-center d-none d-xl-block">
                </div>
                <div class="col-xl-4 col-lg-6 col-md-6 text-end d-none d-md-block">
                    <div class="mobile-social-icon">
                        <h6>Follow Us</h6>
                        <a href="#"><img src="{{ url_for('static', path='assets/imgs/theme/icons/icon-facebook-white.svg') }}" alt="" /></a>
                        <a href="#"><img src="{{ url_for('static', path='assets/imgs/theme/icons/icon-twitter-white.svg') }}" alt="" /></a>
                        <a href="#"><img src="{{ url_for('static', path='assets/imgs/theme/icons/icon-instagram-white.svg') }}" alt="" /></a>
                        <a href="#"><img src="{{ url_for('static', path='assets/imgs/theme/icons/icon-pinterest-white.svg') }}" alt="" /></a>
                        <a href="#"><img src="{{ url_for('static', path='assets/imgs/theme/icons/icon-youtube-white.svg') }}" alt="" /></a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Preloader Start -->
    <div id="loadingDiv"  style="display: none;">
        <div class="preloader d-flex align-items-center justify-content-center">
            <div class="preloader-inner position-relative">
                <div class="text-center">
                    <img src="{{ url_for('static', path='assets/imgs/theme/loading-transparent.gif') }}" alt="" />
                </div>
            </div>
        </div>
    </div>

    {% block scripts %}
    <script src="{{ url_for('static', path='lib/jquery/dist/jquery.min.js') }}"></script>
    <script src="{{ url_for('static', path='lib/bootstrap/dist/js/bootstrap.bundle.min.js') }}"></script> 
    <!-- Vendor JS -->
    <script src="{{ url_for('static', path='lib/jquery/dist/jquery.min.js') }}"></script>
    <script src="{{ url_for('static', path='lib/bootstrap/dist/js/bootstrap.bundle.min.js') }}"></script>
    <script src="{{ url_for('static', path='assets/js/vendor/modernizr-3.6.0.min.js') }}"></script>
    <script src="{{ url_for('static', path='assets/js/vendor/jquery-3.6.0.min.js') }}"></script>
    <script src="{{ url_for('static', path='assets/js/vendor/jquery-migrate-3.3.0.min.js') }}"></script>
    <script src="{{ url_for('static', path='assets/js/vendor/bootstrap.bundle.min.js') }}"></script>
    <script src="{{ url_for('static', path='assets/js/plugins/slick.js') }}"></script>
    <script src="{{ url_for('static', path='assets/js/plugins/wow.js') }}"></script>
    <script src="{{ url_for('static', path='assets/js/plugins/perfect-scrollbar.js') }}"></script>
    <script src="{{ url_for('static', path='assets/js/plugins/magnific-popup.js') }}"></script>
    <script src="{{ url_for('static', path='assets/js/plugins/select2.min.js') }}"></script>
    <script src="{{ url_for('static', path='assets/js/plugins/waypoints.js') }}"></script>
    <script src="{{ url_for('static', path='assets/js/plugins/counterup.js') }}"></script>
    <script src="{{ url_for('static', path='assets/js/plugins/images-loaded.js') }}"></script>
    <script src="{{ url_for('static', path='assets/js/plugins/isotope.js') }}"></script>
    <script src="{{ url_for('static', path='assets/js/plugins/scrollup.js') }}"></script>
    <script src="{{ url_for('static', path='assets/js/plugins/jquery.syotimer.min.js') }}"></script>
    <script src="{{ url_for('static', path='assets/js/plugins/jquery.countdown.min.js') }}"></script>
    <script src="{{ url_for('static', path='assets/js/plugins/jquery.vticker-min.js') }}"></script>
    <script src="{{ url_for('static', path='assets/js/plugins/jquery.theia.sticky.js') }}"></script>
    <script src="{{ url_for('static', path='assets/js/plugins/jquery.elevatezoom.js') }}"></script>
    
    <!-- Template  JS -->
    <script src="{{ url_for('static', path='assets/js/main.js') }}?v=5.6"></script>
    <script src="{{ url_for('static', path='assets/js/shop.js') }}?v=5.6"></script>

    <!-- Toastr JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>

    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script>
        // On load check for actions to be done in local storage
        window.onload = function() {
            try{
                var action = localStorage.getItem("action")
                console.log(action)
                // Toast template to use 
                const SuccessToast = Swal.mixin({
                        toast: true,
                        position: "top-end",
                        showConfirmButton: false,
                        timer: 3000,
                        timerProgressBar: true,
                        didOpen: (toast) => {
                            toast.onmouseenter = Swal.stopTimer;
                            toast.onmouseleave = Swal.resumeTimer;
                        }
                    });
                // For successful login
                if(action === "success_login"){
                    console.log("trigger login toast")
                    var login_user = document.getElementById("login_user").innerHTML
                    SuccessToast.fire({
                        icon: "success",
                        title: `Welcome back ${login_user}`
                    });
                    localStorage.removeItem("action")
                }
                // For successful logout
                else if(action === "success_logout"){
                    console.log("trigger logout toast")
                    SuccessToast.fire({
                        icon: "success",
                        title: "Logout Successfully"
                    });
                    localStorage.removeItem("action")
                // For signup confirmation
                }else if(action === "signup_confirmation"){
                    console.log("trigger signup confirmation toast")
                    var email = localStorage.getItem("data")
                    SuccessToast.fire({
                        icon:"success",
                        title:`A confirmation code has been sent to ${email}`
                    })
                    localStorage.removeItem("action")
                    localStorage.removeItem("data")
                }else if(action === "success_signup"){
                    console.log("success account activated toast")
                    SuccessToast.fire({
                        icon:"success",
                        title:`Successfully activated account`
                    })
                    localStorage.removeItem("action")
                }else if(action === "signup_error"){
                    console.log("signup error toast")
                    var message = localStorage.getItem("data")
                    SuccessToast.fire({
                        icon:"error",
                        title:message
                    })
                    
                }
            }catch(error){
                console.log(error)
            }

        }
        
        // Triggers logout action to store in local storage
        function logout(){
            console.log("logout")
            localStorage.setItem("action","success_logout")
        }

        // Set notification in local storage
        function setNotificationMessage(category, text) {
            const notificationObject = { category, text };
            localStorage.setItem('notificationMessage', JSON.stringify(notificationObject));
        }

        document.addEventListener('DOMContentLoaded', function() {
            // Check if there is a notification message in local storage
            const storedNotification = JSON.parse(localStorage.getItem('notificationMessage'));
            
            if (storedNotification) {
                // Extract category and text from the stored object
                const { category, text } = storedNotification;

                // Display the notification message using Toastr based on the category
                if (category === 'success') {
                    toastr.success(text);
                } else if (category === 'error') {
                    toastr.error(text);
                } else if (category === 'info') {
                    toastr.info(text);
                }

                // Clear the notification message from local storage
                localStorage.removeItem('notificationMessage');
            }
        });
    </script>
    {% endblock %}
</body>

</html>